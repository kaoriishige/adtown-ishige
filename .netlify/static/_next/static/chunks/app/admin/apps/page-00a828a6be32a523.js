(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[887],{7976:(e,s,a)=>{Promise.resolve().then(a.bind(a,8625))},8625:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>p});var l=a(5155),t=a(2115),n=a(3915),i=a(5317),r=a(9509);let c={apiKey:r.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:r.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:r.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:r.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:r.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:r.env.NEXT_PUBLIC_FIREBASE_APP_ID},d=(0,n.Dk)().length?(0,n.Sx)():(0,n.Wp)(c),o=(0,i.aU)(d);var u=a(313),m=a(1368);function p(){let[e,s]=(0,t.useState)([]),[a,n]=(0,t.useState)(null),[r,c]=(0,t.useState)(!1);(0,t.useEffect)(()=>{d()},[]);let d=async()=>{s((await (0,i.GG)((0,i.rJ)(o,"apps"))).docs.map(e=>({id:e.id,...e.data()})))},p=async e=>{confirm("本当に削除しますか？")&&(await (0,i.kd)((0,i.H9)(o,"apps",e)),d())},x=e=>{n(e||{id:"",name:"",description:"",url:"",categories:[],isPremium:!1}),c(!0)},h=async()=>{if(!a)return;let e=a.id||(0,m.A)(),s=(0,i.H9)(o,"apps",e);await (0,i.BN)(s,{name:a.name,description:a.description,url:a.url,categories:a.categories,isPremium:a.isPremium}),c(!1),d()};return(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"アプリ一覧（管理）"}),(0,l.jsx)("button",{onClick:()=>x(),className:"mb-4 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"＋ 新規追加"}),(0,l.jsx)("ul",{className:"space-y-4",children:e.map(e=>(0,l.jsxs)("li",{className:"border p-4 rounded",children:[(0,l.jsx)("p",{className:"font-bold",children:e.name}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),(0,l.jsxs)("div",{className:"mt-2 space-x-2",children:[(0,l.jsx)("button",{onClick:()=>x(e),className:"px-3 py-1 bg-blue-500 text-white rounded",children:"編集"}),(0,l.jsx)("button",{onClick:()=>p(e.id),className:"px-3 py-1 bg-red-500 text-white rounded",children:"削除"})]})]},e.id))}),(0,l.jsxs)(u.lG,{open:r,onClose:()=>c(!1),className:"relative z-50",children:[(0,l.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,l.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,l.jsxs)(u.lG.Panel,{className:"bg-white rounded p-6 max-w-md w-full",children:[(0,l.jsx)(u.lG.Title,{className:"text-lg font-bold mb-4",children:"アプリ編集"}),(0,l.jsx)("input",{type:"text",placeholder:"アプリ名",value:(null==a?void 0:a.name)||"",onChange:e=>n({...a,name:e.target.value}),className:"w-full border p-2 mb-2"}),(0,l.jsx)("input",{type:"text",placeholder:"説明",value:(null==a?void 0:a.description)||"",onChange:e=>n({...a,description:e.target.value}),className:"w-full border p-2 mb-2"}),(0,l.jsx)("input",{type:"text",placeholder:"URL",value:(null==a?void 0:a.url)||"",onChange:e=>n({...a,url:e.target.value}),className:"w-full border p-2 mb-2"}),(0,l.jsx)("input",{type:"text",placeholder:"カテゴリ（カンマ区切り）",value:(null==a?void 0:a.categories.join(","))||"",onChange:e=>n({...a,categories:e.target.value.split(",").map(e=>e.trim())}),className:"w-full border p-2 mb-2"}),(0,l.jsxs)("label",{className:"flex items-center mb-4",children:[(0,l.jsx)("input",{type:"checkbox",checked:(null==a?void 0:a.isPremium)||!1,onChange:e=>n({...a,isPremium:e.target.checked}),className:"mr-2"}),"プレミアムアプリ"]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,l.jsx)("button",{onClick:()=>c(!1),className:"px-4 py-2 bg-gray-300 rounded",children:"キャンセル"}),(0,l.jsx)("button",{onClick:h,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"保存"})]})]})})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[992,614,441,684,358],()=>s(7976)),_N_E=e.O()}]);