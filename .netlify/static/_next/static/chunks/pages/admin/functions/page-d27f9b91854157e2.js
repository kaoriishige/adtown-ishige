(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[343],{1395:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/functions/page",function(){return t(6481)}])},6481:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return r}});var a=t(5893),c=t(7294);function r(){let[e,n]=(0,c.useState)(""),[t,r]=(0,c.useState)(!1),s=async(e,t)=>{r(!0),n("");try{let a=await fetch("/api/".concat(e)),c=await a.json();if(a.ok)n("✅ ".concat(t," 実行完了")),c.url&&n(e=>"".concat(e,"\n\uD83D\uDCCE CSV: ").concat(c.url));else throw Error(c.error||"エラー")}catch(e){n("❌ ".concat(t," 失敗：").concat(e.message))}finally{r(!1)}};return(0,a.jsxs)("div",{className:"p-6 max-w-xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-xl font-bold mb-4",children:"Cloud Functions 実行"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",disabled:t,onClick:()=>s("run-summary","紹介報酬の月次集計"),children:"\uD83D\uDCCA 紹介報酬を月次集計"}),(0,a.jsx)("button",{className:"bg-green-600 text-white px-4 py-2 rounded",disabled:t,onClick:()=>s("run-export","CSV出力"),children:"\uD83E\uDDFE CSVを出力"})]}),e&&(0,a.jsx)("pre",{className:"mt-6 p-4 bg-gray-100 border rounded whitespace-pre-wrap",children:e})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=1395)}),_N_E=e.O()}]);