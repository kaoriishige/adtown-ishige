(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{3362:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/export",function(){return n(7979)}])},7979:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(5893),s=n(7294),a=n(9332),l=n(2370);function u(){let[e,t]=(0,s.useState)(null),[n,u]=(0,s.useState)(!0),[c,i]=(0,s.useState)(""),[o,d]=(0,s.useState)(!1),h=(0,a.useRouter)();(0,s.useEffect)(()=>{let e=(0,l.v0)(),n=(0,l.Aj)(e,e=>{e?t(e):h.push("/login"),u(!1)});return()=>n()},[h]);let x=async()=>{d(!0),i("");try{let e=await fetch("/api/run-export"),t=await e.json();t&&t.csvUrl?i(t.csvUrl):alert("出力に失敗しました")}catch(e){alert("エラーが発生しました")}d(!1)};return n?(0,r.jsx)("p",{className:"p-6 text-gray-600",children:"読み込み中..."}):(0,r.jsxs)("div",{className:"max-w-2xl mx-auto p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"CSV出力（紹介報酬集計）"}),(0,r.jsx)("button",{onClick:x,disabled:o,className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 disabled:opacity-50",children:o?"出力中...":"CSVを出力する"}),c&&(0,r.jsxs)("p",{className:"mt-4 text-green-600",children:["✅ 出力完了："," ",(0,r.jsx)("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"underline",children:"CSVをダウンロード"})]})]})}}},function(e){e.O(0,[290,204,332,888,774,179],function(){return e(e.s=3362)}),_N_E=e.O()}]);